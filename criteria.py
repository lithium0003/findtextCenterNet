import torch
import numpy as np
from PIL import Image, ImageFilter
import glob

from models.detector import TextDetectorModel
from util_func import width, height, sigmoid

check_list = {
    'testdata/clip10.png': [
        {
            'key': 'code2',
            'x': 38,
            'y': 13,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 25,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 49,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 73,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 84,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 97,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 109,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 121,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 134,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 57,
            'y': 133,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 58,
            'y': 25,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 58,
            'y': 37,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip11.png': [
        {
            'key': 'code2',
            'x': 114,
            'y': 24,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 48,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 113,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 72,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 115,
            'y': 85,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 96,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 113,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 120,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 113,
            'y': 132,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 114,
            'y': 145,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 133,
            'y': 144,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 134,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 134,
            'y': 48,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip12.png': [
        {
            'key': 'code8',
            'x': 4,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 19,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 63,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 136,
            'y': 37,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 135,
            'y': 54,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 136,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 166,
            'y': 19,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 20,
            'y': 155,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 20,
            'y': 163,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 20,
            'y': 170,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 20,
            'y': 178,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 136,
            'y': 62,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 166,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 165,
            'y': 42,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 166,
            'y': 50,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 166,
            'y': 59,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 107,
            'y': 156,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 107,
            'y': 178,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 49,
            'y': 100,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 107,
            'y': 90,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 107,
            'y': 90,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 93,
            'y': 76,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 93,
            'y': 84,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 80,
            'y': 11,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip13.png': [
        {
            'key': 'key',
            'x': 162,
            'y': 15,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 162,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 162,
            'y': 22,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 162,
            'y': 12,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 162,
            'y': 18,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip14.png': [
        {
            'key': 'code8',
            'x': 152,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 128,
            'y': 55,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 83,
            'y': 52,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 12,
            'y': 49,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 104,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip15.png': [
        {
            'key': 'key',
            'x': slice(188,210),
            'y': slice(0,220),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 79,
            'y': 188,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 82,
            'y': 188,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 220,
            'y': 186,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(100,105),
            'y': slice(82,88),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 102,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 102,
            'y': 99,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip16.png': [
        {
            'key': 'key',
            'x': 22,
            'y': 150,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 23,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 21,
            'y': 166,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': slice(43,46),
            'y': slice(177,180),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 210,
            'y': 217,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': slice(22,28),
            'y': slice(0,110),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 56,
            'y': 126,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 56,
            'y': 126,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 187,
            'y': 73,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 187,
            'y': 133,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 45,
            'y': 93,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 45,
            'y': 114,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 43,
            'y': 196,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 44,
            'y': 178,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip17.png': [
        {
            'key': 'key',
            'x': 135,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 65,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 89,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 127,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 99,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 111,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 135,
            'y': 144,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 134,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 123,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 184,
            'y': 44,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 202,
            'y': 122,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 126,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 127,
            'y': 76,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 143,
            'y': 203,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 125,
            'y': 203,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip18.png': [
        {
            'key': 'key',
            'x': 31,
            'y': 203,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip19.png': [
        {
            'key': 'code8',
            'x': 44,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': slice(50,152),
            'y': slice(34,42),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 177,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 135,
            'y': 72,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 111,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 89,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 45,
            'y': 85,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 158,
            'y': 68,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 225,
            'y': 81,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 202,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 203,
            'y': 82,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 101,
            'y': 136,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 19,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 21,
            'y': 37,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(196,233),
            'y': slice(60,70),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 81,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 84,
            'y': 37,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 103,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 99,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 88,
            'y': 169,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 88,
            'y': 166,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 88,
            'y': 171,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 202,
            'y': 167,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 66,
            'y': 197,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 21,
            'y': 197,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 44,
            'y': 197,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 133,
            'y': 176,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip20.png': [
        {
            'key': 'key',
            'x': 26,
            'y': 42,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 162,
            'y': 89,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': slice(166,170),
            'y': slice(89,93),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 99,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 123,
            'y': 103,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(117,127),
            'y': slice(83,93),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 83,
            'y': 71,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 84,
            'y': 119,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 110,
            'y': 71,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 111,
            'y': 119,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 96,
            'y': 67,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 124,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 32,
            'y': 72,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 240,
            'y': 70,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip21.png': [
        {
            'key': 'key',
            'x': 52,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 72,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 120,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 211,
            'y': 173,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 203,
            'y': 81,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 199,
            'y': 85,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 156,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': slice(38,42),
            'y': slice(76,81),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(218,223),
            'y': slice(147,151),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 40,
            'y': 95,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 43,
            'y': 163,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 134,
            'y': 74,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 201,
            'y': 200,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 221,
            'y': 118,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 221,
            'y': 133,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 222,
            'y': 198,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 220,
            'y': 6,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 53,
            'y': 142,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 53,
            'y': 145,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 54,
            'y': 158,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 54,
            'y': 167,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 101,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 101,
            'y': 147,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 101,
            'y': 156,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 113,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 121,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 129,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 137,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 146,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 231,
            'y': 170,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 232,
            'y': 177,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 232,
            'y': 186,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 232,
            'y': 193,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 232,
            'y': 201,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 111,
            'y': 92,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 117,
            'y': 39,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 221,
            'y': 182,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip22.png': [
        {
            'key': 'key',
            'x': slice(81,92),
            'y': slice(23,27),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 71,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 77,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 74,
            'y': 24,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(93,132),
            'y': slice(48,71),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(174,203),
            'y': slice(53,76),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(118,120),
            'y': slice(111,113),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(118,120),
            'y': slice(143,146),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 118,
            'y': 127,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 120,
            'y': 79,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 237,
            'y': 71,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 234,
            'y': 151,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 155,
            'y': 26,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 197,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 96,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 187,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 187,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 233,
            'y': 202,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 128,
            'y': 141,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 74,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 212,
            'y': 67,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip23.png': [
        {
            'key': 'key',
            'x': slice(116,127),
            'y': slice(80,90),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(164,169),
            'y': slice(75,80),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(107,112),
            'y': slice(84,88),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 111,
            'y': 118,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 83,
            'y': 70,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 110,
            'y': 70,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 32,
            'y': 72,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 240,
            'y': 69,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 109,
            'y': 70,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 123,
            'y': 106,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip24.png': [
        {
            'key': 'key',
            'x': slice(87,94),
            'y': slice(70,77),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(100,105),
            'y': slice(94,99),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': slice(105,132),
            'y': slice(121,191),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(137,141),
            'y': slice(225,231),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 92,
            'y': 87,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 142,
            'y': 88,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 236,
            'y': 92,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 116,
            'y': 43,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 176,
            'y': 42,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 103,
            'y': 243,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 117,
            'y': 73,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip25.png': [
        {
            'key': 'key',
            'x': 146,
            'y': 176,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 176,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 133,
            'y': 153,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 138,
            'y': 153,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': slice(94,116),
            'y': slice(128,215),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 85,
            'y': 138,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 201,
            'y': 157,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 99,
            'y': 15,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 15,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 153,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 153,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 148,
            'y': 176,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 200,
            'y': 167,
            'direction': 'low',
            'threshold': 0.3,
        },
        {
            'key': 'key',
            'x': 79,
            'y': 4,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 79,
            'y': 16,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 94,
            'y': 222,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 164,
            'y': 41,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 147,
            'y': 221,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 24,
            'y': 15,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 35,
            'y': 15,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 20,
            'y': 130,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 226,
            'y': 227,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip26.png': [
        {
            'key': 'code8',
            'x': 56,
            'y': 51,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 81,
            'y': 67,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 56,
            'y': 51,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip27.png': [
        {
            'key': 'code2',
            'x': slice(12,14),
            'y': slice(64,67),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(182,186),
            'y': slice(109,112),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 12,
            'y': 29,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 12,
            'y': 29,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 51,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 109,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 128,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 201,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 72,
            'y': 150,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 72,
            'y': 163,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 111,
            'y': 208,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 185,
            'y': 98,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 203,
            'y': 152,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 13,
            'y': 53,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 186,
            'y': 203,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip28.png': [
        {
            'key': 'code2',
            'x': 113,
            'y': 163,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 37,
            'y': 63,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 36,
            'y': 39,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 158,
            'y': 171,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 158,
            'y': 174,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 158,
            'y': 177,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip29.png': [
        {
            'key': 'code8',
            'x': 10,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 69,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 142,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 190,
            'y': 170,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 191,
            'y': 181,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 142,
            'y': 42,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 10,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 8,
            'y': 216,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 106,
            'y': 193,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 206,
            'y': 170,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 190,
            'y': 170,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 190,
            'y': 182,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 206,
            'y': 194,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 149,
            'y': 73,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 88,
            'y': 28,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 107,
            'y': 28,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 191,
            'y': 28,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 206,
            'y': 26,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 225,
            'y': 27,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip30.png': [
        {
            'key': 'code1',
            'x': slice(90,115),
            'y': slice(40,200),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(90,115),
            'y': slice(40,200),
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip31.png': [
        {
            'key': 'key',
            'x': 143,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 25,
            'y': 63,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 26,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 106,
            'y': 120,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 118,
            'y': 138,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 131,
            'y': 120,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 130,
            'y': 58,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 91,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip32.png': [
        {
            'key': 'key',
            'x': 76,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 87,
            'y': 105,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 81,
            'y': 100,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 134,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 133,
            'y': 162,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 153,
            'y': 70,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 153,
            'y': 81,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 171,
            'y': 128,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 172,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 181,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 77,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 134,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 208,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 116,
            'y': 23,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 153,
            'y': 24,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 191,
            'y': 25,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(20,125),
            'y': slice(20,180),
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip33.png': [
        {
            'key': 'key',
            'x': 89,
            'y': 78,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 89,
            'y': 82,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 89,
            'y': 113,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 89,
            'y': 117,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 89,
            'y': 111,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'code8',
            'x': 11,
            'y': 27,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 90,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 109,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 165,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 166,
            'y': 140,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 165,
            'y': 151,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 182,
            'y': 129,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 173,
            'y': 149,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 31,
            'y': 105,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 146,
            'y': 157,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 146,
            'y': 179,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip34.png': [
        {
            'key': 'key',
            'x': 101,
            'y': 59,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 70,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 81,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 155,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 173,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 89,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 85,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 77,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 74,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 66,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 62,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 101,
            'y': 56,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 10,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 28,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 47,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 101,
            'y': 49,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 119,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 155,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 173,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 64,
            'y': 58,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 83,
            'y': 58,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 137,
            'y': 58,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 191,
            'y': 58,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 192,
            'y': 171,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 83,
            'y': 81,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code1',
            'x': 87,
            'y': 66,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 82,
            'y': 69,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 87,
            'y': 67,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 32,
            'y': 19,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 31,
            'y': 51,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 31,
            'y': 75,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 127,
            'y': 127,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip35.png': [
        {
            'key': 'key',
            'x': 188,
            'y': 226,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 53,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 35,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 65,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 65,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 35,
            'y': 65,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 77,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 35,
            'y': 77,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 88,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 35,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 92,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 84,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 80,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 73,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 69,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip36.png': [
        {
            'key': 'code2',
            'x': 89,
            'y': 232,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 48,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 45,
            'y': 31,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 51,
            'y': 31,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 48,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 45,
            'y': 41,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 51,
            'y': 41,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 47,
            'y': 50,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 48,
            'y': 46,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 48,
            'y': 38,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip37.png': [
        {
            'key': 'key',
            'x': 81,
            'y': 50,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 83,
            'y': 50,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 81,
            'y': 62,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 83,
            'y': 62,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 43,
            'y': 147,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 43,
            'y': 150,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 43,
            'y': 154,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 44,
            'y': 75,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 171,
            'y': 179,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 64,
            'y': 180,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 64,
            'y': 216,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 24,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 63,
            'y': 25,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 143,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 203,
            'y': 30,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 23,
            'y': 12,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 43,
            'y': 13,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 84,
            'y': 14,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 103,
            'y': 14,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 123,
            'y': 16,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 164,
            'y': 16,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 182,
            'y': 17,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip38.png': [
        {
            'key': 'code2',
            'x': 29,
            'y': 45,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 164,
            'y': 40,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 164,
            'y': 51,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 10,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 69,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 164,
            'y': 39,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 126,
            'y': 177,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 87,
            'y': 176,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 30,
            'y': 56,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 136,
            'y': 148,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 108,
            'y': 24,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 199,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip39.png': [
        {
            'key': 'key',
            'x': 65,
            'y': 48,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 64,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 72,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 69,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 75,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 95,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 106,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 94,
            'y': 83,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 71,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 64,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 49,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 46,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 52,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 48,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 63,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 71,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 74,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 93,
            'y': 72,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': slice(50,100),
            'y': slice(50,130),
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip40.png': [
        {
            'key': 'code2',
            'x': 39,
            'y': 10,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 40,
            'y': 41,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 65,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip41.png': [
        {
            'key': 'code8',
            'x': 98,
            'y': 75,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 98,
            'y': 82,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 170,
            'y': 122,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 170,
            'y': 131,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 113,
            'y': 57,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 98,
            'y': 50,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 98,
            'y': 72,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 199,
            'y': 82,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 170,
            'y': 110,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 113,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 97,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 97,
            'y': 40,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 97,
            'y': 42,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 97,
            'y': 43,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 59,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 60,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 62,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 75,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 74,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 76,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 86,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 85,
            'direction': 'low',
            'threshold': 0.25,
        },
        {
            'key': 'key',
            'x': 98,
            'y': 87,
            'direction': 'low',
            'threshold': 0.25,
        },
    ],
    'testdata/clip42.png': [
        {
            'key': 'code1',
            'x': 31,
            'y': 6,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 37,
            'y': 6,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 171,
            'y': 119,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 171,
            'y': 131,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 171,
            'y': 136,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 57,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 23,
            'y': 15,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 44,
            'y': 15,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 22,
            'y': 61,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 68,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 205,
            'y': 121,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 206,
            'y': 133,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 160,
            'y': 144,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip43.png': [
        {
            'key': 'code2',
            'x': 8,
            'y': 54,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 8,
            'y': 66,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip44.png': [
        {
            'key': 'key',
            'x': 176,
            'y': 65,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 176,
            'y': 74,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 176,
            'y': 84,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 156,
            'y': 72,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 156,
            'y': 95,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 156,
            'y': 118,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 17,
            'y': 40,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 39,
            'y': 40,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 62,
            'y': 40,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 28,
            'y': 11,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 19,
            'y': 11,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 9,
            'y': 11,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 9,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 21,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 32,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 44,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 82,
            'y': 65,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 82,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 82,
            'y': 88,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 82,
            'y': 100,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 6,
            'y': 7,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 15,
            'y': 8,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 23,
            'y': 8,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 10,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 33,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 55,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 152,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 151,
            'y': 112,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 82,
            'y': 76,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip45.png': [
        {
            'key': 'code8',
            'x': 17,
            'y': 28,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 17,
            'y': 57,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 16,
            'y': 136,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 16,
            'y': 186,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 52,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 58,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 63,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 69,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 74,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 80,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 85,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 91,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 97,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 102,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 108,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 113,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 119,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 125,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 131,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 137,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 142,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 148,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 154,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 160,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 165,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 170,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 176,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 183,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 189,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 194,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 200,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 206,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 211,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 217,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 222,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 228,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 233,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 239,
            'y': 107,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 245,
            'y': 107,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 97,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip46.png': [
        {
            'key': 'key',
            'x': 166,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 160,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 155,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 150,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 144,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 139,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 133,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 128,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 122,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 117,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 111,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 106,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 100,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 94,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 88,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 82,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 76,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 70,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 60,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 54,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 48,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 42,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 36,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 30,
            'y': 108,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 22,
            'y': 108,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip47.png': [
        {
            'key': 'code8',
            'x': 14,
            'y': 22,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 24,
            'y': 16,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 29,
            'y': 20,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 73,
            'y': 20,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 169,
            'y': 21,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 195,
            'y': 20,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'sepline',
            'x': 134,
            'y': slice(25,226),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 25,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 54,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 66,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 71,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 82,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 88,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 94,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 100,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 106,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 112,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 118,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 129,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 134,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 140,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 146,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 152,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 158,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 163,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 169,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 174,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 180,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 186,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 191,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 197,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 203,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 208,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 214,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 220,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 134,
            'y': 226,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 135,
            'y': 22,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 230,
            'y': 20,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 40,
            'y': 65,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 14,
            'y': 22,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 205,
            'y': 91,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip48.png': [
        {
            'key': 'sepline',
            'x': 134,
            'y': slice(0,150),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 150,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 144,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 133,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 127,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 121,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 116,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 110,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 104,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 99,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 93,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 88,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 82,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 76,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 70,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 64,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 59,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 42,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 30,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 18,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 135,
            'y': 12,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip49.png': [
        {
            'key': 'sepline',
            'x': 150,
            'y': slice(0,250),
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'textline',
            'x': 87,
            'y': slice(45,192),
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 150,
            'y': slice(0,250),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 87,
            'y': 102,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 86,
            'y': 126,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 96,
            'y': 100,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 96,
            'y': 106,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 96,
            'y': 126,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip50.png': [
        {
            'key': 'sepline',
            'x': slice(0,247),
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 22,
            'y': 44,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip51.png': [
        {
            'key': 'key',
            'x': 63,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 61,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 66,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 86,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 83,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 89,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 140,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 143,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 138,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 39,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 151,
            'y': 33,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 23,
            'y': 61,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 42,
            'y': 61,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 74,
            'y': 62,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 79,
            'y': 61,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 82,
            'y': 61,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': slice(80,82),
            'y': 61,
            'direction': 'low',
            'threshold': 0.5,
        },
    ],
    'testdata/clip52.png': [
        {
            'key': 'code2',
            'x': 50,
            'y': 51,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 49,
            'y': 109,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip53.png': [
        {
            'key': 'key',
            'x': 21,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 27,
            'y': 77,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 24,
            'y': 77,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 21,
            'y': 114,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 27,
            'y': 114,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 24,
            'y': 114,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 21,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 24,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 27,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 30,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 33,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 36,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 39,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 42,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 45,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 49,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 52,
            'y': 140,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 55,
            'y': 140,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 58,
            'y': 140,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 61,
            'y': 140,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 64,
            'y': 140,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 68,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 71,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 74,
            'y': 139,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 77,
            'y': 139,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 80,
            'y': 140,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 83,
            'y': 140,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip54.png': [
        {
            'key': 'key',
            'x': 47,
            'y': 176,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 59,
            'y': 176,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 53,
            'y': 176,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip55.png': [
        {
            'key': 'key',
            'x': 113,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 113,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 113,
            'y': 76,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 118,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 118,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 118,
            'y': 76,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 76,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 118,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 118,
            'y': 68,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 118,
            'y': 76,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 12,
            'y': 62,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 55,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 84,
            'y': 60,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 27,
            'y': 54,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 40,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 69,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 98,
            'y': 61,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 112,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 53,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 83,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 113,
            'y': 92,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 98,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 98,
            'y': 68,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': 85,
            'y': 68,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': slice(80,103),
            'y': slice(58,80),
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip56.png': [
        {
            'key': 'code8',
            'x': 102,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 44,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 15,
            'y': 19,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 117,
            'y': 9,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 82,
            'y': 73,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 60,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 60,
            'y': 37,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 61,
            'y': 39,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip57.png': [
        {
            'key': 'key',
            'x': 96,
            'y': 124,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 96,
            'y': 136,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 96,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 96,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 105,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 105,
            'y': 135,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 105,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 105,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 96,
            'y': 124,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 96,
            'y': 136,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 96,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 96,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 105,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 105,
            'y': 135,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 105,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code4',
            'x': 105,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 124,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 136,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 105,
            'y': 123,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 105,
            'y': 135,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 105,
            'y': 148,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 105,
            'y': 160,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': slice(41,182),
            'y': slice(19,23),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code4',
            'x': slice(95,109),
            'y': slice(172,188),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 111,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 96,
            'y': 173,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 122,
            'y': 124,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 121,
            'y': 112,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip58.png': [
        {
            'key': 'key',
            'x': slice(110,120),
            'y': slice(0,60),
            'direction': 'low',
            'threshold': 0.01,
        },
    ],
    'testdata/clip59.png': [
        {
            'key': 'key',
            'x': 100,
            'y': 119,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip60.png': [
        {
            'key': 'key',
            'x': 62,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 20,
            'y': 135,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 78,
            'y': 109,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 135,
            'y': 129,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 62,
            'y': 42,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 80,
            'y': 42,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 100,
            'y': 43,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 138,
            'y': 45,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 156,
            'y': 44,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 175,
            'y': 46,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 6,
            'y': 49,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 118,
            'y': 53,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 116,
            'y': 118,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 114,
            'y': 146,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip61.png': [
        {
            'key': 'key',
            'x': 56,
            'y': 118,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 57,
            'y': 106,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 58,
            'y': 113,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 108,
            'y': 130,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 107,
            'y': 143,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 108,
            'y': 156,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 167,
            'y': 15,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 168,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 86,
            'y': 137,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 86,
            'y': 137,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 106,
            'y': 116,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code8',
            'x': 28,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 86,
            'y': 30,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 186,
            'y': 27,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip62.png': [
        {
            'key': 'code2',
            'x': 25,
            'y': 50,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 25,
            'y': 60,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 43,
            'y': 78,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 100,
            'y': 71,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip63.png': [
        {
            'key': 'code2',
            'x': 24,
            'y': 17,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 24,
            'y': 47,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 24,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 24,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 31,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 31,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 31,
            'y': 39,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 28,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 31,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 35,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 39,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip64.png': [
        {
            'key': 'code2',
            'x': slice(28,47),
            'y': slice(7,96),
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code1',
            'x': slice(28,47),
            'y': slice(7,96),
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip65.png': [
        {
            'key': 'code2',
            'x': 39,
            'y': 19,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 46,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 38,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 46,
            'y': 26,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 46,
            'y': 30,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 46,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 46,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 46,
            'y': 26,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 46,
            'y': 30,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 46,
            'y': 36,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 46,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip66.png': [
        {
            'key': 'code2',
            'x': 40,
            'y': 25,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 40,
            'y': 55,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 35,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 39,
            'y': 45,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 47,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 47,
            'y': 40,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code1',
            'x': 47,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 47,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 47,
            'y': 40,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 47,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip67.png': [
        {
            'key': 'key',
            'x': 6,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 8,
            'y': 9,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 10,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 25,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 25,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 27,
            'y': 9,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 30,
            'y': 9,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 41,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 41,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 43,
            'y': 9,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 45,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code8',
            'x': 61,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 61,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 63,
            'y': 9,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 65,
            'y': 9,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip68.png': [
        {
            'key': 'code2',
            'x': 71,
            'y': 242,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 225,
            'y': 202,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 224,
            'y': 213,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'code2',
            'x': 13,
            'y': 98,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 12,
            'y': 50,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'code2',
            'x': 12,
            'y': 38,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip69.png': [
        {
            'key': 'key',
            'x': 14,
            'y': 5,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 14,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 6,
            'y': 5,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 6,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 33,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 31,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': slice(68,70),
            'y': 5,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 80,
            'y': 34,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip70.png': [
        {
            'key': 'key',
            'x': 36,
            'y': 13,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 36,
            'y': 16,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 36,
            'y': 10,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 61,
            'y': 12,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 62,
            'y': 12,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 64,
            'y': 12,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 14,
            'y': 12,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 15,
            'y': 12,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 17,
            'y': 12,
            'direction': 'high',
            'threshold': 0.99,
        },
    ],
    'testdata/clip71.png': [
        {
            'key': 'key',
            'x': 8,
            'y': 5,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 8,
            'y': 9,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 8,
            'y': 14,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 8,
            'y': 19,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 8,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 11,
            'y': 5,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 15,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 11,
            'y': 25,
            'direction': 'low',
            'threshold': 0.1,
        },
    ],
    'testdata/clip72.png': [
        {
            'key': 'key',
            'x': 5,
            'y': 5,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 12,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 18,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 24,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 30,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 36,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 5,
            'y': 42,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 2,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 4,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 7,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 10,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 12,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 14,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 16,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 18,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 20,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 22,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 24,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 26,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 28,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 30,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 32,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 34,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 37,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 39,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 41,
            'direction': 'high',
            'threshold': 0.75,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 44,
            'direction': 'low',
            'threshold': 0.1,
        },
        {
            'key': 'key',
            'x': 12,
            'y': 47,
            'direction': 'high',
            'threshold': 0.75,
        },
    ],
    'testdata/clip73.png': [
        {
            'key': 'key',
            'x': 27,
            'y': 22,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 22,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 20,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 29,
            'y': 24,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 55,
            'y': 22,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 57,
            'y': 22,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 57,
            'y': 20,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 57,
            'y': 24,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 84,
            'y': 22,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 86,
            'y': 22,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 86,
            'y': 20,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 86,
            'y': 24,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 109,
            'y': 22,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 111,
            'y': 22,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 111,
            'y': 20,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 111,
            'y': 24,
            'direction': 'low',
            'threshold': 0.5,
        },
    ],
    'testdata/clip74.png': [
        {
            'key': 'key',
            'x': 13,
            'y': 11,
            'direction': 'high',
            'threshold': 0.99,
        },
    ],
    'testdata/clip75.png': [
        {
            'key': 'key',
            'x': 32,
            'y': 13,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 11,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 32,
            'y': 15,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 72,
            'y': 13,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 72,
            'y': 11,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 72,
            'y': 15,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 108,
            'y': 13,
            'direction': 'high',
            'threshold': 0.99,
        },
        {
            'key': 'key',
            'x': 108,
            'y': 11,
            'direction': 'low',
            'threshold': 0.5,
        },
        {
            'key': 'key',
            'x': 108,
            'y': 15,
            'direction': 'low',
            'threshold': 0.5,
        },
    ],
    'testdata/empty*.png': [
        {
            'key': 'key',
            'x': slice(0,255),
            'y': slice(0,255),
            'direction': 'low',
            'threshold': 0.001,
        },
        {
            'key': 'code1',
            'x': slice(0,255),
            'y': slice(0,255),
            'direction': 'low',
            'threshold': 0.001,
        },
        {
            'key': 'code2',
            'x': slice(0,255),
            'y': slice(0,255),
            'direction': 'low',
            'threshold': 0.001,
        },
        {
            'key': 'code4',
            'x': slice(0,255),
            'y': slice(0,255),
            'direction': 'low',
            'threshold': 0.001,
        },
        {
            'key': 'code8',
            'x': slice(0,255),
            'y': slice(0,255),
            'direction': 'low',
            'threshold': 0.001,
        },
    ],
}

def run_check(model: TextDetectorModel, verbose=False):
    model.eval()
    device = next(model.parameters()).device
    passcount = 0
    failcount = 0
    im = []
    for key in check_list:
        files = sorted(glob.glob(key))
        for file in files:
            im0 = Image.open(file).convert('RGB')
            im0 = np.asarray(im0)

            if im0.shape[1] > width:
                im0 = im0[:,:width]
            if im0.shape[0] > height:
                im0 = im0[:height,:]

            padx = max(0, width - im0.shape[1])
            pady = max(0, height - im0.shape[0])
            im0 = np.pad(im0, [[0,pady],[0,padx],[0,0]], 'constant', constant_values=((255,255),(255,255),(255,255)))
            im.append(im0)

    im = (np.stack(im, axis=0) / 255.).astype(np.float32)
    heatmap = []
    for i in range(0, im.shape[0], 16):
        if verbose:
            print(i)
        images = torch.from_numpy(im[i:i+16]).permute(0,3,1,2).to(device=device)
        with torch.no_grad():
            heatmap1, features = model.detector(images)
            heatmap1 = heatmap1.cpu().numpy()
        heatmap.append(heatmap1)
    heatmap = np.concatenate(heatmap, axis=0)

    with open('result1/checklist.log','w') as wf:
        i = 0
        for key in check_list:
            files = sorted(glob.glob(key))
            check_target = check_list[key]
            for file in files:
                print(file, file=wf)
                if verbose:
                    print(file)

                keymap_p = sigmoid(heatmap[i,0,:,:])
                textline_p = sigmoid(heatmap[i,3,:,:])
                sepline_p = sigmoid(heatmap[i,4,:,:])
                code_p = []
                for k in range(4):
                    code_p.append(sigmoid(heatmap[i,5+k,:,:]))

                for criteria in check_target:
                    if criteria['key'] == 'key':
                        target_map = keymap_p
                    elif criteria['key'] == 'code1':
                        target_map = code_p[0]
                    elif criteria['key'] == 'code2':
                        target_map = code_p[1]
                    elif criteria['key'] == 'code4':
                        target_map = code_p[2]
                    elif criteria['key'] == 'code8':
                        target_map = code_p[3]
                    elif criteria['key'] == 'textline':
                        target_map = textline_p
                    elif criteria['key'] == 'sepline':
                        target_map = sepline_p

                    x = criteria['x']
                    y = criteria['y']
                    target = target_map[y,x]

                    if criteria['direction'] == 'high':
                        value = np.max(target)
                        if value > criteria['threshold']:
                            print(' PASS', value, criteria, file=wf)
                            if verbose:
                                print(' PASS', value, criteria)
                            passcount += 1
                        else:
                            print(' fail', value, criteria, file=wf)
                            if verbose:
                                print(' fail', value, criteria)
                            failcount += 1
                    elif criteria['direction'] == 'low':
                        value = np.max(target)
                        if value < criteria['threshold']:
                            print(' PASS', value, criteria, file=wf)
                            if verbose:
                                print(' PASS', value, criteria)
                            passcount += 1
                        else:
                            print(' fail', value, criteria, file=wf)
                            if verbose:
                                print(' fail', value, criteria)
                            failcount += 1
                i += 1

        print('','passcount:',passcount,'failcount',failcount, file=wf)
        print('','passcount:',passcount,'failcount',failcount)
    model.train()
    return failcount == 0

def test_plot(test_target=None):
    import matplotlib.pyplot as plt
    for key in check_list:
        files = sorted(glob.glob(key))
        for file in files:
            if test_target and file != test_target:
                continue
            print(file)
            im0 = Image.open(file).convert('RGB')
            im0 = np.asarray(im0)
            target = check_list[key]

            count = {}
            figs = {}
            ax = {}

            for key in ['key', 'textline', 'sepline', 'code1', 'code2', 'code4', 'code8']:
                figs[key] = plt.figure()
                count[key] = 0
                ax[key] = plt.subplot()
                ax[key].imshow(im0)
                ax[key].set_title(key)

            for criteria in target:
                x = criteria['x']
                y = criteria['y']

                if criteria['direction'] == 'high':
                    c = 'g'
                else:
                    c = 'r'
                if isinstance(x, slice) and isinstance(y, slice):
                    ax[criteria['key']].plot([x.start*4, x.start*4, (x.stop-1)*4, (x.stop-1)*4, x.start*4],[y.start*4, (y.stop-1)*4, (y.stop-1)*4, y.start*4, y.start*4],c)
                elif isinstance(x, slice):
                    ax[criteria['key']].plot([x.start*4, x.start*4, (x.stop-1)*4, (x.stop-1)*4, x.start*4],[y*4]*5,c)
                elif isinstance(y, slice):
                    ax[criteria['key']].plot([x*4]*5,[y.start*4, (y.stop-1)*4, (y.stop-1)*4, y.start*4, y.start*4],c)
                else:
                    ax[criteria['key']].plot(x*4,y*4,c+'o')
                count[criteria['key']] += 1
            
            for key in count:
                if count[key] == 0:
                    plt.close(figs[key])
        
            plt.show()

if __name__=='__main__':
    # model = TextDetectorModel(pre_weights=False)
    # data = torch.load('model.pt', map_location="cpu", weights_only=True)
    # model.load_state_dict(data['model_state_dict'])

    # if torch.cuda.is_available():
    #     device = 'cuda'
    # elif torch.backends.mps.is_available():
    #     device = 'mps'
    # else:
    #     device = 'cpu'
    # device = torch.device(device)
    # model.to(device=device)

    # import os
    # os.makedirs('result1', exist_ok=True)
    # run_check(model, verbose=True)
    import sys

    if len(sys.argv) > 1:
        test_plot(sys.argv[1])
    else:
        test_plot()
